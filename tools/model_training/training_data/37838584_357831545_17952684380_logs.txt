  Downloading charset_normalizer-3.3.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (33 kB)
Collecting idna<4,>=2.5 (from requests<3.0,>=2.26->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading idna-3.4-py3-none-any.whl (61 kB)
      61.5/61.5 kB 12.3 MB/s eta 0:00:00
Collecting certifi>=2017.4.17 (from requests<3.0,>=2.26->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading certifi-2023.7.22-py3-none-any.whl.metadata (2.2 kB)
Collecting distlib<1,>=0.3.7 (from virtualenv<21.0.0,>=20.22.0->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading distlib-0.3.7-py2.py3-none-any.whl.metadata (5.1 kB)
Collecting zipp>=0.5 (from importlib-metadata>=4.11.4->keyring<25.0.0,>=24.0.0->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading zipp-3.17.0-py3-none-any.whl.metadata (3.7 kB)
Collecting cryptography>=2.0 (from SecretStorage>=3.2->keyring<25.0.0,>=24.0.0->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading cryptography-41.0.4-cp37-abi3-manylinux_2_28_x86_64.whl.metadata (5.2 kB)
Collecting more-itertools (from jaraco.classes->keyring<25.0.0,>=24.0.0->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading more_itertools-10.1.0-py3-none-any.whl.metadata (33 kB)
Collecting cffi>=1.12 (from cryptography>=2.0->SecretStorage>=3.2->keyring<25.0.0,>=24.0.0->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading cffi-1.16.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (1.5 kB)
Collecting pycparser (from cffi>=1.12->cryptography>=2.0->SecretStorage>=3.2->keyring<25.0.0,>=24.0.0->poetry==1.6.1->-r requirements-poetry.txt (line 1))
  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)
      118.7/118.7 kB 26.9 MB/s eta 0:00:00
Downloading poetry-1.6.1-py3-none-any.whl (232 kB)
    232.8/232.8 kB 29.2 MB/s eta 0:00:00
Downloading poetry_core-1.7.0-py3-none-any.whl (426 kB)
    426.4/426.4 kB 47.3 MB/s eta 0:00:00
Downloading cachecontrol-0.13.1-py3-none-any.whl (22 kB)
Downloading dulwich-0.21.6-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (513 kB)
    513.8/513.8 kB 59.2 MB/s eta 0:00:00
Downloading keyring-24.2.0-py3-none-any.whl (37 kB)
Downloading packaging-23.2-py3-none-any.whl (53 kB)
    53.0/53.0 kB 9.7 MB/s eta 0:00:00
Downloading platformdirs-3.11.0-py3-none-any.whl (17 kB)
Downloading poetry_plugin_export-1.5.0-py3-none-any.whl (10 kB)
Downloading requests-2.31.0-py3-none-any.whl (62 kB)
    62.6/62.6 kB 12.4 MB/s eta 0:00:00
Downloading shellingham-1.5.3-py2.py3-none-any.whl (9.7 kB)
Downloading tomlkit-0.12.1-py3-none-any.whl (37 kB)
Downloading trove_classifiers-2023.10.18-py3-none-any.whl (13 kB)
Downloading virtualenv-20.24.5-py3-none-any.whl (3.7 MB)
    3.7/3.7 MB 107.5 MB/s eta 0:00:00
Downloading certifi-2023.7.22-py3-none-any.whl (158 kB)
    158.3/158.3 kB 29.4 MB/s eta 0:00:00
Downloading charset_normalizer-3.3.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (137 kB)
    137.5/137.5 kB 25.1 MB/s eta 0:00:00
Downloading distlib-0.3.7-py2.py3-none-any.whl (468 kB)
    468.9/468.9 kB 64.9 MB/s eta 0:00:00
Downloading filelock-3.12.4-py3-none-any.whl (11 kB)
Downloading importlib_metadata-6.8.0-py3-none-any.whl (22 kB)
Downloading msgpack-1.0.7-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (557 kB)
    558.0/558.0 kB 68.4 MB/s eta 0:00:00
Downloading rapidfuzz-2.15.2-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)
    3.0/3.0 MB 79.4 MB/s eta 0:00:00
Downloading urllib3-2.0.7-py3-none-any.whl (124 kB)
    124.2/124.2 kB 21.6 MB/s eta 0:00:00
Downloading jaraco.classes-3.3.0-py3-none-any.whl (5.9 kB)
Downloading cryptography-41.0.4-cp37-abi3-manylinux_2_28_x86_64.whl (4.4 MB)
    4.4/4.4 MB 112.5 MB/s eta 0:00:00
Downloading zipp-3.17.0-py3-none-any.whl (7.4 kB)
Downloading more_itertools-10.1.0-py3-none-any.whl (55 kB)
    55.8/55.8 kB 9.3 MB/s eta 0:00:00
Downloading cffi-1.16.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (464 kB)
    464.8/464.8 kB 65.6 MB/s eta 0:00:00
Installing collected packages: trove-classifiers, ptyprocess, distlib, zipp, urllib3, tomlkit, shellingham, rapidfuzz, pyrsistent, pyproject-hooks, pycparser, poetry-core, platformdirs, pkginfo, pexpect, packaging, msgpack, more-itertools, jeepney, installer, idna, filelock, crashtest, charset-normalizer, certifi, attrs, virtualenv, requests, jsonschema, jaraco.classes, importlib-metadata, dulwich, cleo, cffi, build, requests-toolbelt, cryptography, cachecontrol, SecretStorage, keyring, poetry-plugin-export, poetry
Successfully installed SecretStorage-3.3.3 attrs-23.1.0 build-0.10.0 cachecontrol-0.13.1 certifi-2023.7.22 cffi-1.16.0 charset-normalizer-3.3.1 cleo-2.0.1 crashtest-0.4.1 cryptography-41.0.4 distlib-0.3.7 dulwich-0.21.6 filelock-3.12.4 idna-3.4 importlib-metadata-6.8.0 installer-0.7.0 jaraco.classes-3.3.0 jeepney-0.8.0 jsonschema-4.17.3 keyring-24.2.0 more-itertools-10.1.0 msgpack-1.0.7 packaging-23.2 pexpect-4.8.0 pkginfo-1.9.6 platformdirs-3.11.0 poetry-1.6.1 poetry-core-1.7.0 poetry-plugin-export-1.5.0 ptyprocess-0.7.0 pycparser-2.21 pyproject-hooks-1.0.0 pyrsistent-0.19.3 rapidfuzz-2.15.2 requests-2.31.0 requests-toolbelt-1.0.0 shellingham-1.5.3 tomlkit-0.12.1 trove-classifiers-2023.10.18 urllib3-2.0.7 virtualenv-20.24.5 zipp-3.17.0
Creating virtualenv mergify-engine-cHHEL7M--py3.11 in /home/runner/.cache/pypoetry/virtualenvs
Installing dependencies from lock file
Package operations: 177 installs, 0 updates, 0 removals
  Installing pyasn1 (0.5.0)
  Installing attrs (23.1.0)
  Installing cachetools (5.3.1)
  Installing certifi (2023.7.22)
  Installing charset-normalizer (3.3.1)
  Installing idna (3.4)
  Installing protobuf (4.24.4)
  Installing pyasn1-modules (0.3.0)
  Installing pycparser (2.21)
  Installing rpds-py (0.10.6)
  Installing rsa (4.9)
  Installing sniffio (1.3.0)
  Installing typing-extensions (4.8.0)
  Installing urllib3 (1.26.18)
  Installing annotated-types (0.6.0)
  Installing anyio (3.7.1)
  Installing boltons (21.0.0)
  Installing cffi (1.16.0)
  Installing google-auth (2.23.3)
  Installing googleapis-common-protos (1.61.0)
  Installing h11 (0.14.0)
  Installing markupsafe (2.1.3)
  Installing mdurl (0.1.2)
  Installing pydantic-core (2.10.1)
  Installing referencing (0.30.2)
  Installing requests (2.31.0)
  Installing wrapt (1.15.0)
  Installing zipp (3.17.0)
  Installing alabaster (0.7.13)
  Installing babel (2.13.0)
  Installing bracex (2.4)
  Installing cryptography (41.0.4)
  Installing click (8.1.7)
  Installing deprecated (1.2.14)
  Installing docutils (0.20.1)
  Installing face (22.0.0)
  Installing google-api-core (2.12.0)
  Installing google-crc32c (1.5.0)
  Installing hpack (4.0.0)
  Installing httpcore (0.18.0)
  Installing hyperframe (6.0.1)
  Installing imagesize (1.4.1)
  Installing importlib-metadata (6.8.0)
  Installing iniconfig (2.0.0)
  Installing jinja2 (3.1.2)
  Installing jsonschema-specifications (2023.7.1)
  Installing mako (1.2.4)
  Installing markdown-it-py (3.0.0)
  Installing multidict (6.0.4)
  Installing packaging (23.2)
  Installing pluggy (1.3.0)
  Installing pydantic (2.4.2)
  Installing pygments (2.16.1)
  Installing ruamel-yaml-clib (0.2.8)
  Installing six (1.16.0)
  Installing snowballstemmer (2.2.0)
  Installing soupsieve (2.5)
  Installing sphinxcontrib-applehelp (1.0.7)
  Installing sphinxcontrib-devhelp (1.0.5)
  Installing sphinxcontrib-htmlhelp (2.0.4)
  Installing sphinxcontrib-jsmath (1.0.1)
  Installing sphinxcontrib-qthelp (1.0.6)
  Installing sphinxcontrib-serializinghtml (1.1.9)
  Installing sqlalchemy (2.0.22)
  Installing starlette (0.27.0)
  Installing ujson (5.8.0)
  Installing alembic (1.12.0)
  Installing beautifulsoup4 (4.12.2)
  Installing bytecode (0.15.1)
  Installing cattrs (23.1.2)
  Installing click-option-group (0.5.6)
  Installing colorama (0.4.6)
  Installing coverage (7.3.2)
  Installing ddsketch (2.0.4)
  Installing defusedxml (0.7.1)
  Installing dulwich (0.21.6)
  Installing envier (0.4.0)
  Installing execnet (2.0.2)
  Installing fastapi (0.104.0)
  Installing flupy (1.2.0)
  Installing glom (22.1.0)
  Installing google-cloud-core (2.3.3)
  Installing google-resumable-media (2.6.0)
  Installing greenlet (3.0.0)
  Installing h2 (4.1.0)
  Installing httptools (0.6.1)
  Installing httpx (0.25.0)
  Installing itsdangerous (2.1.2)
  Installing jsonschema (4.19.1)
  Installing mypy-extensions (1.0.0)
  Installing numpy (1.26.1)
  Installing opentelemetry-api (1.20.0)
  Installing ordered-set (4.1.0)
  Installing parse (1.19.1)
  Installing passlib (1.7.4)
  Installing pastel (0.2.1)
  Installing pathspec (0.11.2)
  Installing pbr (5.11.1)
  Installing peewee (3.17.0)
  Installing platformdirs (3.11.0)
  Installing psycopg (3.1.12)
  Installing psycopg-binary (3.1.12)
  Installing pyenchant (3.2.2)
  Installing pytest (7.4.2)
  Installing python-dotenv (1.0.0)
  Installing python-json-logger (2.0.7)
  Installing python-lsp-jsonrpc (1.0.0)
  Installing pyyaml (6.0.1)
  Installing regex (2023.10.3)
  Installing rich (13.6.0)
  Installing ruamel-yaml (0.17.40)
  Installing setproctitle (1.3.3)
  Installing sphinx (7.2.6)
  Installing tomli (2.0.1)
  Installing types-pyopenssl (23.2.0.2)
  Installing uvloop (0.19.0)
  Installing watchfiles (0.21.0)
  Installing wcmatch (8.5)
  Installing websockets (12.0)
  Installing xmltodict (0.13.0)
  Installing yarl (1.9.2)
  Installing aiofiles (23.2.1)
  Installing alembic-utils (0.8.1)
  Installing anys (0.3.0)
  Installing asgi-lifespan (2.1.0)
  Installing authlib (1.2.1)
  Installing black (23.10.0)
  Installing daiquiri (3.2.3)
  Installing datadog (0.47.0)
  Installing ddtrace (1.20.2)
  Installing deepdiff (6.6.1)
  Installing filelock (3.12.4)
  Installing first (2.0.2)
  Installing google-cloud-storage (2.12.0)
  Installing graphql-utils (0.4)
  Installing gunicorn (21.2.0)
  Installing hiredis (2.2.3)
  Installing honcho (1.1.0)
  Installing imia (0.5.3)
  Installing markdownify (0.11.6)
  Installing msgpack (1.0.7)
  Installing mypy (1.6.1)
  Installing pgvector (0.2.3)
  Installing poethepoet (0.24.1)
  Installing pydantic-settings (2.0.3)
  Installing pyjwt (2.8.0)
  Installing pytest-asyncio (0.21.1)
  Installing pytest-cov (4.1.0)
  Installing pytest-flakefinder (1.1.0)
  Installing pytest-github-actions-annotate-failures (0.2.0)
  Installing pytest-rerunfailures (12.0)
  Installing pytest-split (0.8.1)
  Installing pytest-timeout (2.2.0)
  Installing pytest-xdist (3.3.1)
  Installing python-multipart (0.0.6)
  Installing redis (5.0.0)
  Installing reno (4.0.0)
  Installing respx (0.20.2)
  Installing ruff (0.1.1)
  Installing semgrep (1.45.0)
  Installing sentry-sdk (1.32.0)
  Installing sphinxcontrib-jquery (4.1)
  Installing sphinxcontrib-spelling (8.0.0)
  Installing sqlalchemy-utils (0.41.1)
  Installing starsessions (2.1.3)
  Installing tenacity (8.2.3)
  Installing tiktoken (0.5.1)
  Installing types-first (2.0.5.2)
  Installing types-pkg-resources (0.1.3)
  Installing types-python-dateutil (2.8.19.14)
  Installing types-pyyaml (6.0.12.12)
  Installing types-redis (4.6.0.7)
  Installing unidecode (1.3.7)
  Installing uvicorn (0.23.2)
  Installing vcrpy (5.1.0)
  Installing voluptuous (0.13.1)
  Installing yamllint (1.32.0)
Installing the current project: mergify_engine (0.0.0)
Poe => ./tools/poetry-ci-install.sh
Installing dependencies from lock file
No dependencies to install or update
Installing the current project: mergify_engine (0.0.0)
Poe => ./tools/run-tests.sh pytest -v --timeout_method thread --reruns 3 --only-rerun MissingEventTimeout --splits 10 --group 2 --store-durations --durations-path engine-ci-test-durations --splitting-algorithm=least_duration --reruns 3 --only-rerun MissingEventTimeout
+ PYTHON_EXTRACT_DOCKER_PORT='
import json, sys
data = json.load(sys.stdin)
if isinstance(data, list):
    publishers = data ['\''Publishers'\'']
else:
    publishers = data['\''Publishers'\'']
for pub in publishers:
    if pub['\''PublishedPort'\''] > 0:
        print(pub['\''PublishedPort'\''])
        sys.exit(0)
sys.exit(1)
'
+ '[' true == true ']'
+ REDIS_PORT=6363
+ POSTGRES_PORT=5432
+ GOOGLE_CLOUD_STORAGE_PORT=8000
+ export MERGIFYENGINE_DATABASE_URL=localhost:5432/postgres
+ MERGIFYENGINE_DATABASE_URL=localhost:5432/postgres
+ export MERGIFYENGINE_DEFAULT_REDIS_URL=redis://localhost:6363
+ MERGIFYENGINE_DEFAULT_REDIS_URL=redis://localhost:6363
++ pwgen -1 48
./tools/run-tests.sh: line 48: pwgen: command not found
+ export MERGIFYENGINE_DATABASE_OAUTH_TOKEN_SECRET_CURRENT=
+ MERGIFYENGINE_DATABASE_OAUTH_TOKEN_SECRET_CURRENT=
+ export STORAGE_EMULATOR_HOST=http://localhost:8000
+ STORAGE_EMULATOR_HOST=http://localhost:8000
+ docker run --net host --rm redis redis-cli -h localhost -p 6363 keys '*'
+ docker run --net host --rm postgres psql localhost:5432/postgres -c 'select 1 as connected'
Unable to find image 'postgres:latest' locally
latest: Pulling from library/postgres
a378f10b3218: Already exists
2ebc5690e391: Pulling fs layer
8fe57f734687: Pulling fs layer
a2ddbb09cd9a: Pulling fs layer
5a2499e87ab8: Pulling fs layer
a45f5c4adf1b: Pulling fs layer
178017fd978e: Pulling fs layer
428dff1cb77d: Pulling fs layer
4667364adfc4: Pulling fs layer
4eea1f5281a9: Pulling fs layer
369467411787: Pulling fs layer
51184495a2bc: Pulling fs layer
d3e246f01410: Pulling fs layer
5a2499e87ab8: Waiting
a45f5c4adf1b: Waiting
178017fd978e: Waiting
428dff1cb77d: Waiting
4667364adfc4: Waiting
4eea1f5281a9: Waiting
369467411787: Waiting
51184495a2bc: Waiting
d3e246f01410: Waiting
2ebc5690e391: Verifying Checksum
2ebc5690e391: Download complete
2ebc5690e391: Pull complete
a2ddbb09cd9a: Verifying Checksum
a2ddbb09cd9a: Download complete
8fe57f734687: Verifying Checksum
8fe57f734687: Download complete
a45f5c4adf1b: Verifying Checksum
a45f5c4adf1b: Download complete
5a2499e87ab8: Verifying Checksum
5a2499e87ab8: Download complete
178017fd978e: Verifying Checksum
178017fd978e: Download complete
428dff1cb77d: Verifying Checksum
428dff1cb77d: Download complete
369467411787: Verifying Checksum
369467411787: Download complete
4eea1f5281a9: Verifying Checksum
4eea1f5281a9: Download complete
51184495a2bc: Verifying Checksum
51184495a2bc: Download complete
d3e246f01410: Verifying Checksum
d3e246f01410: Download complete
8fe57f734687: Pull complete
a2ddbb09cd9a: Pull complete
4667364adfc4: Verifying Checksum
4667364adfc4: Download complete
5a2499e87ab8: Pull complete
a45f5c4adf1b: Pull complete
178017fd978e: Pull complete
428dff1cb77d: Pull complete
4667364adfc4: Pull complete
4eea1f5281a9: Pull complete
369467411787: Pull complete
51184495a2bc: Pull complete
d3e246f01410: Pull complete
Digest: sha256:3d9ed832906091d609cfd6f283e79492ace01ba15866b21d8a262e8fd1cdfb55
Status: Downloaded newer image for postgres:latest
 connected
         1
(1 row)
+ cmd=pytest
+ shift
+ pytest -v --timeout_method thread --reruns 3 --only-rerun MissingEventTimeout --splits 10 --group 2 --store-durations --durations-path engine-ci-test-durations --splitting-algorithm=least_duration --reruns 3 --only-rerun MissingEventTimeout
[pytest-split] No test durations found. Pytest-split will split tests evenly when no durations are found.
[pytest-split] You can expect better results in consequent runs, when test timings have been documented.
 test session starts
platform linux -- Python 3.11.4, pytest-7.4.2, pluggy-1.3.0 -- /home/runner/.cache/pypoetry/virtualenvs/mergify-engine-cHHEL7M--py3.11/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/engine/engine
configfile: pyproject.toml
testpaths: mergify_engine/tests
plugins: asyncio-0.21.1, github-actions-annotate-failures-0.2.0, timeout-2.2.0, ddtrace-1.20.2, rerunfailures-12.0, flakefinder-1.1.0, anyio-3.7.1, split-0.8.1, cov-4.1.0, xdist-3.3.1, respx-0.20.2
asyncio: mode=Mode.AUTO
timeout: 200.0s
timeout method: thread
timeout func_only: False
collecting ...
[pytest-split] Splitting tests with algorithm: least_duration
[pytest-split] Running group 2/10 (estimated duration: 203.00s)
collected 2026 items / 1823 deselected / 203 selected
mergify_engine/tests/functional/test_attributes.py::TestAttributes::test_commits_list_condition PASSED [  0%]
mergify_engine/tests/functional/test_attributes.py::TestAttributes::test_one_commit_verified PASSED [  0%]
mergify_engine/tests/functional/test_attributes.py::TestAttributes::test_repo_name_short_right PASSED [  1%]
mergify_engine/tests/functional/test_attributes.py::TestAttributes::test_retrieve_message_resolved_thread PASSED [  1%]
mergify_engine/tests/functional/test_attributes.py::TestAttributes::test_updated_relative_match PASSED [  2%]
mergify_engine/tests/functional/test_attributes.py::TestAttributesWithSub::test_merge_after PASSED [  2%]
mergify_engine/tests/functional/test_branch_protection.py::TestBranchProtection::test_strict_status_check_with_rebase_update_method_and_no_bot_account PASSED [  3%]
mergify_engine/tests/functional/test_configuration.py::TestConfiguration::test_change_mergify_yml_in_meantime_on_big_pull_request PASSED [  3%]
mergify_engine/tests/functional/test_configuration.py::TestConfiguration::test_invalid_priority_rules_config PASSED [  4%]
mergify_engine/tests/functional/test_count_seats.py::TestCountSeats::test_run_count_seats_report PASSED [  4%]
mergify_engine/tests/functional/test_deprecation.py::TestDeprecation::test_deprecated_multiple_rules_with_same_name PASSED [  5%]
mergify_engine/tests/functional/test_engine.py::TestEngineV2Scenario::test_command_refresh PASSED [  5%]
mergify_engine/tests/functional/test_engine.py::TestEngineV2Scenario::test_merge_custom_msg_template PASSED [  6%]
mergify_engine/tests/functional/test_engine.py::TestEngineV2Scenario::test_pull_refreshed_after_config_change PASSED [  6%]
mergify_engine/tests/functional/test_fixtures.py::test_fixture_web_client PASSED [  7%]
mergify_engine/tests/functional/test_github_async_client.py::TestGitHubClient::test_github_async_client PASSED [  7%]
mergify_engine/tests/functional/actions/test_assign.py::TestAssignAction::test_assign_user_already_assigned PASSED [  8%]
mergify_engine/tests/functional/actions/test_backport.py::TestBackportAction::test_backport_skips_commit_when_change_already_in_destination_branch PASSED [  8%]
mergify_engine/tests/functional/actions/test_comment.py::TestCommentAction::test_comment_template_attribute_error PASSED [  9%]
mergify_engine/tests/functional/actions/test_edit.py::TestEditAction::test_ready_for_review_already_converted PASSED [  9%]
mergify_engine/tests/functional/actions/test_label.py::TestLabelAction::test_label_remove_all PASSED [ 10%]
mergify_engine/tests/functional/actions/test_merge.py::TestMergeAction::test_default_merge_method PASSED [ 10%]
mergify_engine/tests/functional/actions/test_merge.py::TestMergeAction::test_merge_with_installation_token PASSED [ 11%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_batch_queue PASSED [ 11%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_checks_inject_queue_conditions_in_merge_conditions PASSED [ 12%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_cancel_and_refresh_inplace PASSED [ 12%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_ci_timeout_inplace_with_only_pull_request_rules PASSED [ 13%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_conditions_matching_with_pull_request_rules PASSED [ 13%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_inplace_with_merge_update_method_and_different_bot_account PASSED [ 14%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_pr_priority_no_interrupt PASSED [ 14%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_with_ci_in_pull_request_rules PASSED [ 15%]
mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_unqueue_on_synchronise_and_rule_unmatch PASSED [ 15%]
mergify_engine/tests/functional/actions/test_queue_train_api_calls.py::TestTrainApiCalls::test_create_pull_conflicts PASSED [ 16%]
mergify_engine/tests/functional/actions/test_queue_with_partition_rules.py::TestQueueWithPartitionRules::test_two_prs_in_differents_partitions_merged_no_inplace PASSED [ 16%]
mergify_engine/tests/functional/actions/test_rebase.py::TestRebaseAction::test_rebase_ok PASSED [ 17%]
mergify_engine/tests/functional/actions/test_request_reviews.py::TestRequestReviewsAction::test_request_reviews_teams PASSED [ 17%]
mergify_engine/tests/functional/actions/test_squash.py::TestActionSquash::test_squash_several_commits_ok PASSED [ 18%]
mergify_engine/tests/functional/actions/test_workflow_automation_feature_flag.py::TestWorkflowAutomationFeatureFlag::test_pull_request_rules_without_feature PASSED [ 18%]
mergify_engine/tests/functional/api/test_auth.py::test_api_auth_invalid_token PASSED [ 19%]
mergify_engine/tests/functional/api/test_eventlogs.py::TestEventLogsAction::test_unsuccessful_checks_failed_with_spec_checks PASSED [ 19%]
mergify_engine/tests/functional/api/test_queue.py::TestQueueApi::test_estimated_time_of_merge_multiple_pr_waiting_batch PASSED [ 20%]
mergify_engine/tests/functional/api/test_queue.py::TestQueueApi::test_get_queues PASSED [ 20%]
mergify_engine/tests/functional/api/test_queue.py::TestNewQueueApiEndpoint::test_pr_in_queue_without_partitions PASSED [ 21%]
mergify_engine/tests/functional/api/test_queue_freeze.py::TestQueueFreeze::test_queue_freeze_priority_with_empty_frozen_default_queue PASSED [ 21%]
mergify_engine/tests/functional/api/test_statistics_with_partition_rules.py::TestStatisticsWithPartitionsEndpoints::test_time_to_merge_with_partitions_endpoint_with_freeze PASSED [ 22%]
mergify_engine/tests/functional/api/test_subscriptions.py::TestSubscriptionsApi::test_eventlogs_subscription PASSED [ 22%]
mergify_engine/tests/functional/commands/test_commands_restrictions.py::TestCommandsRestrictions::test_false_user_commands_restrictions PASSED [ 23%]
mergify_engine/tests/functional/commands/test_copy.py::TestCommandCopy::test_command_copy PASSED [ 23%]
mergify_engine/tests/functional/commands/test_queue.py::TestQueueCommand::test_multiple_queue_commands_on_different_queues PASSED [ 24%]
mergify_engine/tests/functional/console_scripts/test_clear_subscription_cache.py::test_clear_subscription_cache PASSED [ 24%]
mergify_engine/tests/functional/console_scripts/test_dump_redis_keys.py::TestRedisUtilsDumper::test_download_cached_config_files PASSED [ 25%]
mergify_engine/tests/unit/test_behind.py::test_pull_behind[O-A-B-C] PASSED [ 25%]
mergify_engine/tests/unit/test_clients.py::test_client_installation_HTTP_500 PASSED [ 26%]
mergify_engine/tests/unit/test_command.py::test_run_command_with_user[666-admin-@mergifyio something-Sorry but I didn't understand the command. Please consult [the commands documentation](https://docs.mergify.com/commands) \U0001f4da.] PASSED [ 26%]
mergify_engine/tests/unit/test_command.py::test_run_command_with_no_subscription[backport] PASSED [ 27%]
mergify_engine/tests/unit/test_command.py::test_commands_restrictions_sender_permission[sender-permission!=write-admin-True] PASSED [ 27%]
mergify_engine/tests/unit/test_command.py::test_commands_restrictions_sender_permission[sender-permission>=write-admin-True] PASSED [ 28%]
mergify_engine/tests/unit/test_context.py::test_length_optimisation PASSED [ 28%]
mergify_engine/tests/unit/test_context.py::test_context_merge_after_valid[Merge-After: 2023-01-18 08:10[Europe/Paris]-expected_out6] PASSED [ 29%]
mergify_engine/tests/unit/test_context.py::test_context_merge_after_invalid[Merge-After: 1-01-18] PASSED [ 29%]
mergify_engine/tests/unit/test_context.py::test_context_merge_after_invalid[Merge-After: 2023-1-18[Australia/Sydney]] PASSED [ 30%]
mergify_engine/tests/unit/test_context.py::test_context_merge_after_invalid[Merge-After: 2023-01-1 08:10] PASSED [ 30%]
mergify_engine/tests/unit/test_context.py::test_context_body_null PASSED [ 31%]
mergify_engine/tests/unit/test_context.py::test_reviews_filtering PASSED [ 31%]
mergify_engine/tests/unit/test_count_seats.py::test_store_active_users[workflow_job-event6] PASSED [ 32%]
mergify_engine/tests/unit/test_count_seats.py::test_store_active_users[github_app_authorization-event14] PASSED [ 32%]
mergify_engine/tests/unit/test_count_seats.py::test_store_active_users[repository-event18] PASSED [ 33%]
mergify_engine/tests/unit/test_count_seats.py::test_get_usage_count_seats[workflow_job-event6] PASSED [ 33%]
mergify_engine/tests/unit/test_count_seats.py::test_get_usage_count_seats[github_app_authorization-event14] PASSED [ 33%]
mergify_engine/tests/unit/test_count_seats.py::test_get_usage_count_seats[repository-event18] PASSED [ 34%]
mergify_engine/tests/unit/test_date.py::test_fromisoformat[2021-06-01H18:41:39Z-expected2] PASSED [ 34%]
mergify_engine/tests/unit/test_date.py::test_pretty_datetime[dt2-2021-12-31 23:01 UTC] PASSED [ 35%]
mergify_engine/tests/unit/test_date.py::test_day_of_week_from_string[monday-1] PASSED [ 35%]
mergify_engine/tests/unit/test_date.py::test_invalid_date_string[Time-10:20[Invalid]-Invalid timezone] PASSED [ 36%]
mergify_engine/tests/unit/test_date.py::test_interval_from_string[1 second-expected_interval10] PASSED [ 36%]
mergify_engine/tests/unit/test_date.py::test_interval_from_string[1 days 15 hours 6 minutes 42 seconds-expected_interval13] PASSED [ 37%]
mergify_engine/tests/unit/test_date.py::test_interval_from_string[-1 d -6 m 42 seconds-expected_interval21] PASSED [ 37%]
mergify_engine/tests/unit/test_date.py::test_datetime_inside_time_range[time_to_check3-20-10-21-0-True-True] PASSED [ 38%]
mergify_engine/tests/unit/test_date.py::test_schedule_next_datetime[schedule17-from_time17-expected17] PASSED [ 38%]
mergify_engine/tests/unit/test_date.py::test_schedule_eq_with_datetime[schedule1-date_to_test1-False] PASSED [ 39%]
mergify_engine/tests/unit/test_date.py::test_schedule_eq_with_datetime[schedule8-date_to_test8-False] PASSED [ 39%]
mergify_engine/tests/unit/test_date.py::test_fromisoformat_with_zoneinfo[2023-07-13T14:00Z-expected_datetime2] PASSED [ 40%]
mergify_engine/tests/unit/test_date.py::test_datetimerange_fromisoformat_with_zoneinfo[2007-03-01T13:00:00Z/2008-05-11T15:30:00[Europe/Paris]-expected_dtr3] PASSED [ 40%]
mergify_engine/tests/unit/test_date.py::test_datetimerange_inequality[actual0-other0] PASSED [ 41%]
mergify_engine/tests/unit/test_date.py::test_relativedelta[2023-03-31--1-0-2023-02-28] PASSED [ 41%]
mergify_engine/tests/unit/test_db_populator.py::test_db_populator_load_implementation PASSED [ 42%]
mergify_engine/tests/unit/test_delayed_refresh.py::test_delayed_refresh_without_time[pull2-expected_refresh2] PASSED [ 42%]
mergify_engine/tests/unit/test_delayed_refresh.py::test_delayed_refresh_with_more_success_conditions[start_datetime0-expected_refresh0] PASSED [ 43%]
mergify_engine/tests/unit/test_duplicate.py::test_get_commits_to_cherry_pick_rebase PASSED [ 43%]
mergify_engine/tests/unit/test_engine.py::test_configuration_check_not_needed_with_configuration_changed PASSED [ 44%]
mergify_engine/tests/unit/test_events_db.py::test_event_not_supported PASSED [ 44%]
mergify_engine/tests/unit/test_events_db.py::test_event_action_assign_consistency PASSED [ 45%]
mergify_engine/tests/unit/test_events_db.py::test_event_action_merge_consistency PASSED [ 45%]
mergify_engine/tests/unit/test_github_app_info.py::test_github_app_info_getter PASSED [ 46%]
mergify_engine/tests/unit/test_github_events.py::test_filter_and_dispatch[workflow_job-event6] PASSED [ 46%]
mergify_engine/tests/unit/test_github_events.py::test_filter_and_dispatch[github_app_authorization-event14] PASSED [ 47%]
mergify_engine/tests/unit/test_github_events.py::test_filter_and_dispatch[repository-event18] PASSED [ 47%]
mergify_engine/tests/unit/test_gitter.py::test_gitter_error_catching[To https://github.com/owner/repo\n ! [remote rejected] mergify/bp/main/pr-42 -> mergify/bp/main/pr-42 (cannot lock ref 'refs/heads/mergify/bp/main/pr-42': 'refs/heads/mergify/merge-queue' exists; cannot create 'refs/heads/mergify/bp/main/pr-42')\nerror: failed to push some refs to 'https://github.com/owner/repo'\n\n-GitMergifyNamespaceConflict-cannot lock ref] PASSED [ 48%]
mergify_engine/tests/unit/test_json.py::test_register_type_fail PASSED   [ 48%]
mergify_engine/tests/unit/test_pull_request_finder.py::test_event_to_pull_check_run_same_repo PASSED [ 49%]
mergify_engine/tests/unit/test_redis.py::test_redis_connection_error_workaround_for_broken_behavior PASSED [ 49%]
mergify_engine/tests/unit/test_settings.py::test_type_log_level[ERROR-40] PASSED [ 50%]
mergify_engine/tests/unit/test_settings.py::test_database_url_format[foobar.com:123/foobar.com:123/path] PASSED [ 50%]
mergify_engine/tests/unit/test_subscription.py::test_save_sub[features2] PASSED [ 51%]
mergify_engine/tests/unit/test_summary.py::test_queue_rules_order_operator_or PASSED [ 51%]
mergify_engine/tests/unit/test_summary.py::test_queue_condition_summary_display_override PASSED [ 52%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[end-1-\u2026-None] PASSED [ 52%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[end-21-\u2026-h\xe9 ho! how are yo\u2026] PASSED [ 53%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[end-3-\U0001f60e-None] PASSED [ 53%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[end-6-\U0001f60e-h\U0001f60e] PASSED [ 54%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[middle-18--h\xe9 ho! h you\u221a2?] PASSED [ 54%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[middle-7-\u2026-h\u20262?] PASSED [ 55%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[middle-22-\u2026-h\xe9 ho! ho\u2026 you\u221a2?] PASSED [ 55%]
mergify_engine/tests/unit/test_utils.py::test_unicode_truncate[middle-4-\U0001f60e-\U0001f60e] PASSED [ 56%]
mergify_engine/tests/unit/test_utils.py::test_get_random_choices PASSED  [ 56%]
mergify_engine/tests/unit/test_utils.py::test_to_ordinal_numeric PASSED  [ 57%]
mergify_engine/tests/unit/test_utils.py::test_payload_dumper PASSED      [ 57%]
mergify_engine/tests/unit/test_utils.py::test_strtobool[1-True] PASSED   [ 58%]
mergify_engine/tests/unit/test_utils.py::test_strtobool_exc PASSED       [ 58%]
mergify_engine/tests/unit/test_utils.py::test_url_parser_with_pr_ok[https://github.com/mergifyio/mergify-engine/pull/123#0] PASSED [ 59%]
mergify_engine/tests/unit/test_utils.py::test_url_parser_with_branch_ok[https://github.com/mergifyio/mergify-engine/branch/main#] PASSED [ 59%]
mergify_engine/tests/unit/test_worker.py::test_worker_legacy_push PASSED [ 60%]
mergify_engine/tests/unit/test_worker.py::test_stream_processor_ignore_503 PASSED [ 60%]
mergify_engine/tests/unit/test_worker.py::test_score_priority_helpers[1-2020-01-12T22:42:00] PASSED [ 61%]
mergify_engine/tests/unit/test_worker.py::test_extract_app_from_status[status_event5-circleci] PASSED [ 61%]
mergify_engine/tests/unit/test_worker.py::test_extract_app_from_status[status_event17-akuity] PASSED [ 62%]
mergify_engine/tests/unit/actions/test_copy.py::test_copy_conclusion_pending PASSED [ 62%]
mergify_engine/tests/unit/actions/test_merge.py::test_merge_commit_message[Hello world\n\n# Commit Message:\nmy title\n\nmy body\nis longer-my title-my body\nis longer-None] PASSED [ 63%]
mergify_engine/tests/unit/actions/test_merge.py::test_request_merge_without_method_failure PASSED [ 63%]
mergify_engine/tests/unit/actions/test_queue.py::test_get_rule_checks_status[conditions7-âŒ failure] PASSED [ 64%]
mergify_engine/tests/unit/actions/test_queue.py::test_required_status_checks_strict_incompatibility_with_queue_rules[queue_rule_config2-queue_executor_config2-allow_inplace_checks=false-None] PASSED [ 64%]
mergify_engine/tests/unit/actions/test_queue.py::test_check_method_fastforward_configuration[rebase-None-1-4-True-speculative_checks > 1 is not compatible with fast-forward merge method-The `merge_method` or the queue configuration must be updated.] PASSED [ 65%]
mergify_engine/tests/unit/actions/test_request_reviews.py::test_team_permissions_ok PASSED [ 65%]
mergify_engine/tests/unit/api/test_exceptions.py::test_handler_exception_mergify_not_installed[/v1] PASSED [ 66%]
mergify_engine/tests/unit/api/test_exceptions.py::test_handler_pagination_invalid_cursor[/v1] PASSED [ 66%]
mergify_engine/tests/unit/api/test_gha_failed_jobs.py::test_api_gha_failed_jobs_get_gha_failed_job_detail PASSED [ 66%]
mergify_engine/tests/unit/api/test_security.py::test_bad_owner[noway-] PASSED [ 67%]
mergify_engine/tests/unit/api/test_security.py::test_valid_owner_repo[right123name/-ok] PASSED [ 67%]
mergify_engine/tests/unit/engine/test_actions_runner.py::test_get_already_merged_summary[None-None-\npull_request_rules:\n - name: Automatic merge on approval\n   conditions:\n     - and:\n       - "-draft"\n       - "author=contributor"\n   actions:\n     merge:\n       method: merge\n-] PASSED [ 68%]
mergify_engine/tests/unit/engine/test_actions_runner.py::test_sanitize_action_config[bot_account-sileht-{bot_account: sileht}\n] PASSED [ 68%]
mergify_engine/tests/unit/front/test_applications.py::test_applications_limit PASSED [ 69%]
mergify_engine/tests/unit/front/test_auth.py::test_auth_setup[setup_action=install-400-None-None] PASSED [ 69%]
mergify_engine/tests/unit/front/test_proxy_engine.py::test_engine_proxy_delete_queue_freeze[read-403-expected_json1] PASSED [ 70%]
mergify_engine/tests/unit/front/test_proxy_saas.py::test_saas_proxy_redirect[/front/proxy/saas/github-account/42/something-else-http://localhost:5000/engine/saas/github-account/42/something-else-http://localhost:5000/engine/saas/foo/bar-http://localhost:3000/front/proxy/saas/foo/bar] PASSED [ 70%]
mergify_engine/tests/unit/log_embedder/test_log_cleaner.py::test_clean_manipulating_objects_lines[ [command]/usr/bin/git checkout --progress --force refs/remotes/pull/5770/merge-False] PASSED [ 71%]
mergify_engine/tests/unit/log_embedder/test_log_cleaner.py::test_lower_case[Collecting virtualenv!=20.4.5-collecting virtualenv!=20.4.5] PASSED [ 71%]
mergify_engine/tests/unit/log_embedder/test_log_cleaner.py::test_special_characters[\u5317\u4eb0-Bei Jing ] PASSED [ 72%]
mergify_engine/tests/unit/log_embedder/test_log_cleaner.py::test_clean_stopwords[test sentence merge queue praise mergify random words following hazard sun motor mechanic ball obi wan-test sentence merge queue praise mergify random words following hazard sun motor mechanic ball obi wan] PASSED [ 72%]
mergify_engine/tests/unit/log_embedder/test_log_cleaner.py::test_clean_non_alphanumeric_characters[toto ? tutu, tata; for frodo!!!-toto   tutu  tata  for frodo] PASSED [ 73%]
mergify_engine/tests/unit/log_embedder/test_service.py::test_workflow_job_from_real_life[special chars in name] PASSED [ 73%]
mergify_engine/tests/unit/merge_train/test_deserialization.py::test_deserialize_train[train_without_partition.yaml] PASSED [ 74%]
mergify_engine/tests/unit/merge_train/test_train.py::test_train_remove_head_not_merged PASSED [ 74%]
mergify_engine/tests/unit/merge_train/test_train.py::test_train_queue_pr_with_higher_prio_enters_in_queue_during_merging_1x5 PASSED [ 75%]
mergify_engine/tests/unit/merge_train/test_train.py::test_train_car_old_serialization[created-TrainCarChecksType.DRAFT-ðŸŸ  pending-CiState.PENDING-TrainCarOutcome.UNKNOWN-False-False-] PASSED [ 75%]
mergify_engine/tests/unit/merge_train/test_train.py::test_train_inplace_branch_update_failure PASSED [ 76%]
##[error]test_ci_issue_compute_short_id
AssertionError: assert 'ONEREPO-2' == 'ONEREPO-1'
 - ONEREPO-1
 ?         ^
 + ONEREPO-2
 ?         ^
mergify_engine/tests/unit/models/test_ci_issue.py::test_ci_issue_compute_short_id FAILED [ 76%]
mergify_engine/tests/unit/models/test_github_repository.py::test_is_complete PASSED [ 77%]
mergify_engine/tests/unit/rules/test_condition_evaluation_result.py::test_markdown[condition1-- [ ] `author=me`] PASSED [ 77%]
mergify_engine/tests/unit/rules/test_filter.py::test_string PASSED       [ 78%]
mergify_engine/tests/unit/rules/test_filter.py::test_set_value_expanders_does_not_contain PASSED [ 78%]
mergify_engine/tests/unit/rules/test_filter.py::test_none PASSED         [ 79%]
mergify_engine/tests/unit/rules/test_filter.py::test_current_datetime_range_uncertain_date[current-datetime=2023-XX-31T00:00/2023-XX-31T23:59[Europe/Paris]-2023-01-29-2023-01-31T10:00+02:00-2023-02-02-next_refresh_before_range2-next_refresh_inside_range2-next_refresh_after_range2] PASSED [ 79%]
mergify_engine/tests/unit/rules/test_filter.py::test_schedule_neardatetime_filter PASSED [ 80%]
mergify_engine/tests/unit/rules/test_filter.py::test_list_values_filter[single value match with ">" operator] PASSED [ 80%]
mergify_engine/tests/unit/rules/test_get_rule_checks_status.py::test_rules_checks_status_expected_failure PASSED [ 81%]
mergify_engine/tests/unit/rules/test_merge.py::test_merge_raw_configs_src_empty PASSED [ 81%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[schedule!=Mon-Fri 12:00-23:59-result1] PASSED [ 82%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[base:main-result2] PASSED [ 82%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[#commits=2-result15] PASSED [ 83%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[commits[-1].author~=hellothere-result18] PASSED [ 83%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[merged-at<=2012-01-14T20:32:00+00:00-result22] PASSED [ 84%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[assignee: sileht-result40] PASSED [ 84%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[status-success="my double quoted ci"-result60] PASSED [ 85%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse[check-skipped="my double quoted ci"-result69] PASSED [ 85%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse_invalid[#conflict-`#` modifier is invalid for attribute: `conflict`] PASSED [ 86%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse_invalid[-schedule=MON-friday 10:02-22:35-`-` modifier is invalid for attribute: `schedule`] PASSED [ 86%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse_invalid[foobar-Invalid attribute] PASSED [ 87%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse_invalid[commits-behind-`#` modifier is required for attribute: `commits-behind`] PASSED [ 87%]
mergify_engine/tests/unit/rules/test_parser.py::test_parse_invalid[sender={{ author-Invalid template] PASSED [ 88%]
mergify_engine/tests/unit/rules/test_parser.py::test_validate_jinja_template[{# comment-Invalid template] PASSED [ 88%]
mergify_engine/tests/unit/rules/test_priority_rules.py::test_queue_effective_priority[labels9-15] PASSED [ 89%]
mergify_engine/tests/unit/rules/test_queue_condition_evaluation_result.py::test_condition_json_serialization PASSED [ 89%]
mergify_engine/tests/unit/rules/test_rules.py::test_pull_request_rule[valid1] PASSED [ 90%]
mergify_engine/tests/unit/rules/test_rules.py::test_get_mergify_config[\n            pull_request_rules:\n              - name: ahah\n                conditions:\n                - base=main\n                actions:\n                  comment:\n                    message: |\n                      This pull request has been approved by\n                      {% for name in approved_reviews_by %}\n                      @{{ name }}\n                      {% endfor %}\n            ] PASSED [ 90%]
mergify_engine/tests/unit/rules/test_rules.py::test_user_configuration_schema PASSED [ 91%]
mergify_engine/tests/unit/rules/test_rules.py::test_extends_without_database_cache PASSED [ 91%]
mergify_engine/tests/unit/rules/test_rules.py::test_pull_request_rule_schema_invalid[invalid3-extra keys not allowed @ data\\[0\\]\\['conditions'\\]\\[0\\]\\['foo'\\]] PASSED [ 92%]
mergify_engine/tests/unit/rules/test_rules.py::test_merge_config PASSED  [ 92%]
mergify_engine/tests/unit/rules/test_rules.py::test_action_queue_with_no_default_queue PASSED [ 93%]
mergify_engine/tests/unit/rules/test_rules.py::test_rule_condition_operator[condition4-!=] PASSED [ 93%]
mergify_engine/tests/unit/rules/test_rules_evaluator.py::test_pull_request_rules_evaluator[\npull_request_rules:\n  - name: "head match and label match"\n    conditions:\n    - head=match\n    - label=match\n    actions: {}\n-False] PASSED [ 94%]
mergify_engine/tests/unit/rules/test_rules_evaluator.py::test_pull_request_rules_evaluator[\npull_request_rules:\n  - name: only-checks\n    conditions:\n      - check-success=test\n    actions: {}\n-False] PASSED [ 94%]
mergify_engine/tests/unit/rules/test_tenary_filter.py::test_operator_negate[UnknownType._MARKER_UNKNOWN_OR_FALSE-UnknownType._MARKER_UNKNOWN_OR_TRUE] PASSED [ 95%]
mergify_engine/tests/unit/rules/test_tenary_filter.py::test_operator_any[values3-True] PASSED [ 95%]
mergify_engine/tests/unit/rules/test_tenary_filter.py::test_operator_all[values8-False] PASSED [ 96%]
mergify_engine/tests/unit/rules/test_tenary_filter.py::test_operator_all[values11-False] PASSED [ 96%]
mergify_engine/tests/unit/rules/test_types.py::test_jinja2_valid[{{author}}] PASSED [ 97%]
mergify_engine/tests/unit/rules/test_types.py::test_jinja2_invalid PASSED [ 97%]
mergify_engine/tests/unit/rules/test_types.py::test_github_login_ok[foobaz] PASSED [ 98%]
mergify_engine/tests/unit/rules/test_types.py::test_github_team_ok[foobar-None-foobar] PASSED [ 98%]
mergify_engine/tests/unit/rules/test_types.py::test_github_team_nok[foo/-foobar-GitHub team contains invalid characters] PASSED [ 99%]
mergify_engine/tests/unit/web/test_estimated_time_to_merge.py::test_compute_estimation_no_batch_second_pr PASSED [ 99%]
mergify_engine/tests/unit/web/test_middlewares.py::test_sudo_middleware PASSED [100%]
[pytest-split] Stored test durations in engine-ci-test-durations
 FAILURES
 test_ci_issue_compute_short_id
populated_db = <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7fa7d856a410>
    @pytest.mark.populated_db_datasets("AccountAndRepo")
    async def test_ci_issue_compute_short_id(
        populated_db: sqlalchemy.ext.asyncio.AsyncSession,
    ) -> None:
        issue = await CiIssue.insert(
            populated_db,
            repository_id=github_types.GitHubRepositoryIdType(
                DbPopulator.internal_ref["OneRepo"]
            ),
        )
>       assert issue.short_id == "ONEREPO-1"
E       AssertionError: assert 'ONEREPO-2' == 'ONEREPO-1'
E         - ONEREPO-1
E         ?         ^
E         + ONEREPO-2
E         ?         ^
mergify_engine/tests/unit/models/test_ci_issue.py:23: AssertionError
 Captured stdout setup
  INFO     mergify_engine.logs: ##################### CONFIGURATION ######################
  INFO     mergify_engine.logs: * OPENAI_API_TOKEN:
  INFO     mergify_engine.logs: * LOG_EMBEDDER_ENABLED_ORGS:  
  INFO     mergify_engine.logs: * LOG_EMBEDDER_GCS_BUCKET: bucket-ea8c832b-1f36-4668-adb7-71631e80822e
  INFO     mergify_engine.logs: * LOG_EMBEDDER_GCS_CREDENTIALS:
  INFO     mergify_engine.logs: * SHARED_STREAM_PROCESSES: 1
  INFO     mergify_engine.logs: * DEDICATED_STREAM_PROCESSES: 1
  INFO     mergify_engine.logs: * SHARED_STREAM_TASKS_PER_PROCESS: 7
  INFO     mergify_engine.logs: * BUCKET_PROCESSING_MAX_SECONDS: 100000
  INFO     mergify_engine.logs: * MAX_GITTER_CONCURRENT_JOBS: 20
  INFO     mergify_engine.logs: * CI_DOWNLOAD_FREQUENCY: 1:00:00
  INFO     mergify_engine.logs: * CI_EVENT_PROCESSING_BATCH_SIZE: 1000
  INFO     mergify_engine.logs: * CI_EVENT_INGESTION: True
  INFO     mergify_engine.logs: * CI_DOWNLOAD_BATCH_SIZE: 50
  INFO     mergify_engine.logs: * GITHUB_IN_POSTGRES_EVENTS_INGESTION: True
  INFO     mergify_engine.logs: * GITHUB_IN_POSTGRES_PROCESSING_BATCH_SIZE: 1000
  INFO     mergify_engine.logs: * EVENTLOG_EVENTS_REDIS_INGESTION: True
  INFO     mergify_engine.logs: * SAAS_MODE: True
  INFO     mergify_engine.logs: * SUBSCRIPTION_URL: http://localhost:5000
  INFO     mergify_engine.logs: * ENGINE_TO_SHADOW_OFFICE_API_KEY:
  INFO     mergify_engine.logs: * SUBSCRIPTION_TOKEN: None
  INFO     mergify_engine.logs: * SHADOW_OFFICE_TO_ENGINE_API_KEY:
  INFO     mergify_engine.logs: * SHADOW_OFFICE_TO_ENGINE_API_KEY_PRE_ROTATION: None
  INFO     mergify_engine.logs: * ACCOUNT_TOKENS:  
  INFO     mergify_engine.logs: * APPLICATION_APIKEYS: {}
  INFO     mergify_engine.logs: * DASHBOARD_UI_STATIC_FILES_DIRECTORY: None
  INFO     mergify_engine.logs: * DASHBOARD_UI_FRONT_URL: http://localhost:3000
  INFO     mergify_engine.logs: * DASHBOARD_UI_SESSION_EXPIRATION_HOURS: 24
  INFO     mergify_engine.logs: * DASHBOARD_UI_FEATURES:  
  INFO     mergify_engine.logs: * DASHBOARD_UI_DATADOG_CLIENT_TOKEN: None
  INFO     mergify_engine.logs: * DASHBOARD_UI_GITHUB_IDS_ALLOWED_TO_SUDO:  
  INFO     mergify_engine.logs: * GITHUB_URL: https://github.com
  INFO     mergify_engine.logs: * GITHUB_APP_ID: 0
  INFO     mergify_engine.logs: * GITHUB_PRIVATE_KEY:
  INFO     mergify_engine.logs: * GITHUB_OAUTH_CLIENT_ID: X
  INFO     mergify_engine.logs: * GITHUB_OAUTH_CLIENT_SECRET:
  INFO     mergify_engine.logs: * GITHUB_WEBHOOK_SECRET:
  INFO     mergify_engine.logs: * GITHUB_WEBHOOK_SECRET_PRE_ROTATION: None
  INFO     mergify_engine.logs: * GITHUB_WEBHOOK_FORWARD_URL: None
  INFO     mergify_engine.logs: * GITHUB_WEBHOOK_FORWARD_EVENT_TYPES:  
  INFO     mergify_engine.logs: * REDIS_SSL_VERIFY_MODE_CERT_NONE: False
  INFO     mergify_engine.logs: * REDIS_CRYPTO_SECRET_CURRENT:
  INFO     mergify_engine.logs: * REDIS_CRYPTO_SECRET_OLD: None
  INFO     mergify_engine.logs: * STORAGE_URL: None
  INFO     mergify_engine.logs: * DEFAULT_REDIS_URL: redis://localhost:6363
  INFO     mergify_engine.logs: * ENV_STREAM_URL: redis://localhost:6363?db=3
  INFO     mergify_engine.logs: * ENV_EVENTLOGS_URL: redis://localhost:6363?db=8
  INFO     mergify_engine.logs: * ENV_QUEUE_URL: redis://localhost:6363?db=4
  INFO     mergify_engine.logs: * ENV_CACHE_URL: redis://localhost:6363?db=2
  INFO     mergify_engine.logs: * ENV_TEAM_PERMISSIONS_CACHE_URL: redis://localhost:6363?db=6
  INFO     mergify_engine.logs: * ENV_TEAM_MEMBERS_CACHE_URL: redis://localhost:6363?db=5
  INFO     mergify_engine.logs: * ENV_USER_PERMISSIONS_CACHE_URL: redis://localhost:6363?db=7
  INFO     mergify_engine.logs: * ENV_ACTIVE_USERS_URL: redis://localhost:6363?db=9
  INFO     mergify_engine.logs: * ENV_STATISTICS_URL: redis://localhost:6363?db=10
  INFO     mergify_engine.logs: * ENV_AUTHENTICATION_URL: redis://localhost:6363?db=11
  INFO     mergify_engine.logs: * LOG_LEVEL: 20
  INFO     mergify_engine.logs: * LOG_STDOUT: True
  INFO     mergify_engine.logs: * LOG_STDOUT_LEVEL: None
  INFO     mergify_engine.logs: * LOG_DATADOG: False
  INFO     mergify_engine.logs: * LOG_DATADOG_LEVEL: None
  INFO     mergify_engine.logs: * LOG_DEBUG_LOGGER_NAMES:  
  INFO     mergify_engine.logs: * SENTRY_URL: None
  INFO     mergify_engine.logs: * SENTRY_ENVIRONMENT: test
  INFO     mergify_engine.logs: * DATABASE_URL: postgresql+psycopg://@localhost:5432/postgres0
  INFO     mergify_engine.logs: * DATABASE_POOL_SIZES: {'worker': 15, 'web': 55}
  INFO     mergify_engine.logs: * DATABASE_OAUTH_TOKEN_SECRET_CURRENT:
  INFO     mergify_engine.logs: * DATABASE_OAUTH_TOKEN_SECRET_OLD: None
  INFO     mergify_engine.logs: * HTTP_TRUSTED_HOSTS: ['*']
  INFO     mergify_engine.logs: * API_ENABLE: True
  INFO     mergify_engine.logs: * REDIS_STREAM_WEB_MAX_CONNECTIONS: 50
  INFO     mergify_engine.logs: * REDIS_CACHE_WEB_MAX_CONNECTIONS: 50
  INFO     mergify_engine.logs: * REDIS_QUEUE_WEB_MAX_CONNECTIONS: 50
  INFO     mergify_engine.logs: * REDIS_EVENTLOGS_WEB_MAX_CONNECTIONS: 50
  INFO     mergify_engine.logs: * REDIS_STATS_WEB_MAX_CONNECTIONS: 50
  INFO     mergify_engine.logs: * REDIS_ACTIVE_USERS_WEB_MAX_CONNECTIONS: 50
  INFO     mergify_engine.logs: * REDIS_AUTHENTICATION_WEB_MAX_CONNECTIONS: 50
  INFO     mergify_engine.logs: * VERSION: dev
  INFO     mergify_engine.logs: * SHA: unknown
  INFO     mergify_engine.logs: * HEALTHCHECK_SHARED_TOKEN: None
  INFO     mergify_engine.logs: * ALLOW_REQUIRE_BRANCH_PROTECTION_QUEUE_ATTRIBUTE: True
  INFO     mergify_engine.logs: * PATH: /home/runner/.cache/pypoetry/virtualenvs/mergify-engine-cHHEL7M--py3.11/bin:/opt/hostedtoolcache/Python/3.11.4/x64/bin:/opt/hostedtoolcache/Python/3.11.4/x64:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
  INFO     mergify_engine.logs: ##########################################################
 slowest 10 durations
12.56s call     mergify_engine/tests/functional/api/test_queue.py::TestQueueApi::test_estimated_time_of_merge_multiple_pr_waiting_batch
10.05s call     mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_batch_queue
9.10s call     mergify_engine/tests/functional/api/test_queue.py::TestQueueApi::test_get_queues
7.10s call     mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_pr_priority_no_interrupt
6.78s call     mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_ci_timeout_inplace_with_only_pull_request_rules
6.47s call     mergify_engine/tests/unit/front/test_applications.py::test_applications_limit
6.19s call     mergify_engine/tests/functional/api/test_queue_freeze.py::TestQueueFreeze::test_queue_freeze_priority_with_empty_frozen_default_queue
6.01s call     mergify_engine/tests/functional/test_branch_protection.py::TestBranchProtection::test_strict_status_check_with_rebase_update_method_and_no_bot_account
5.93s call     mergify_engine/tests/functional/actions/test_queue.py::TestQueueAction::test_queue_inplace_with_merge_update_method_and_different_bot_account
5.86s call     mergify_engine/tests/functional/api/test_statistics_with_partition_rules.py::TestStatisticsWithPartitionsEndpoints::test_time_to_merge_with_partitions_endpoint_with_freeze
 short test summary info
FAILED mergify_engine/tests/unit/models/test_ci_issue.py::test_ci_issue_compute_short_id - AssertionError: assert 'ONEREPO-2' == 'ONEREPO-1'
  - ONEREPO-1
  ?         ^
  + ONEREPO-2
  ?         ^
 1 failed, 202 passed, 1823 deselected in 386.55s (0:06:26)
##[error]Process completed with exit code 1.